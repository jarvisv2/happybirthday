<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Birthday Flow | Supriya</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Fonts & Icons needed by Page 3 -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Caveat:wght@600&family=Inter:wght@500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- jQuery needed by Page 3 interactions -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <!-- Optional: keep your original style.css for Page 3 -->
  <link rel="stylesheet" href="style.css">

  <style>
    /* ---- App-wide layout ---- */
    html, body {
      height: 100%;
    }
    body {
      margin: 0;
      font-family: 'Comic Sans MS', Arial, sans-serif;
      background: #ffe5ec;
      overflow: hidden;
    }
    .screen {
      position: relative;
      width: 100%;
      min-height: 100vh;
      display: none;
    }
    .screen.active {
      display: block;
    }
    .fade-in {
      animation: fadeIn 500ms ease forwards;
    }
    .fade-out {
      animation: fadeOut 500ms ease forwards;
    }
    @keyframes fadeIn { from {opacity:0} to {opacity:1} }
    @keyframes fadeOut { from {opacity:1} to {opacity:0} }

    /* ---------- PAGE 1 ---------- */
    #page1 {
      background: linear-gradient(180deg, #ffe5ec 0%, #fdeaff 100%);
      overflow: hidden;
    }
    #page1 .center-card {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: #fff6fa;
      border: 3px solid #fecafc;
      border-radius: 20px;
      padding: 36px 56px;
      box-shadow: 0 0 20px #ffd6f7aa;
      text-align: center;
    }
    #page1 .hearts {
      font-size: 28px;
      color: #f578b5;
      margin-bottom: 12px;
    }
    #page1 .loading-text {
      color: #de1979;
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 15px;
    }
    #page1 .decor {
      font-size: 26px;
      letter-spacing: 6px;
      display: flex;
      justify-content: center;
      gap: 18px;
      user-select: none;
      flex-wrap: wrap;
    }
    /* Clickable emojis */
    .emoji {
      cursor: pointer;
      display: inline-block;
      transition: transform .25s ease, filter .25s ease, opacity .25s ease;
    }
    .emoji:hover { transform: translateY(-2px) scale(1.06); }
    .emoji.gone { animation: popOut .55s ease forwards; }
    @keyframes popOut {
      40% { transform: scale(1.18) rotate(6deg); }
      100% { transform: scale(0) rotate(-22deg); opacity: 0; filter: blur(2px); }
    }

    /* Floating shapes for Page 1 */
    #page1 .floating {
      position: absolute;
      animation: float 8s linear infinite;
      opacity: 0.4;
      user-select: none;
    }
    #page1 .star { color: #fcdb5a; font-size: 22px; }
    #page1 .heart1, #page1 .heart2 { color: #f578b5; }
    #page1 .heart2 { color: #c997e6; }
    #page1 .dot { color: #fff; }
    @keyframes float {
      0%   { transform: translateY(100vh); }
      100% { transform: translateY(-20vh); }
    }

    /* ---------- PAGE 2 ---------- */
    #page2 {
      background: linear-gradient(180deg, #ffe5ec 0%, #f6e7fc 100%);
      overflow: hidden;
      position: relative;
    }
    /* Rename to avoid conflicts with Page 3 .heart/.star */
    #page2 .p2-heart, #page2 .p2-star, #page2 .p2-dot {
      position: absolute;
      pointer-events: none;
      opacity: 0.35;
      font-size: 28px;
    }
    #page2 .p2-heart { color: #ea62bc; }
    #page2 .p2-star  { color: #fcdb5a; }
    #page2 .p2-dot   { color: #c7b5f6; }

    #page2 .main-card {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: #fff6fa;
      border: 3px solid #fecafc;
      border-radius: 28px;
      padding: 40px 40px 32px 40px;
      box-shadow: 0 0 20px #ffd6f7aa;
      min-width: 620px;
      text-align: center;
    }
    #page2 .title {
      color: #de1979;
      font-size: 2.3rem;
      font-weight: bold;
      margin-bottom: 30px;
    }
    #page2 .countdown-container {
      display: flex;
      justify-content: center;
      gap: 28px;
      margin-bottom: 26px;
    }
    #page2 .time-box {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 4px 14px #efd9ef5e;
      padding: 16px 28px;
      min-width: 80px;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 2rem;
      font-weight: bold;
      color: #b370ef;
    }
    #page2 .time-label {
      color: #e255a2;
      font-weight: normal;
      font-size: 1.05rem;
      margin-top: 2px;
      margin-bottom: 2px;
    }
    #page2 .time-emoji { font-size: 1.4rem; margin-top: 4px; }
    #page2 .message-box {
      background: #fce3f0;
      border-radius: 16px;
      padding: 20px;
      margin: 0 auto 10px;
      width: 70%;
      font-size: 1.13rem;
      color: #671b7a;
    }
    #page2 .message-box.ready {
      cursor: pointer;
      animation: pulse 1.2s ease-in-out infinite;
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); box-shadow: 0 0 0 rgba(240, 128, 128, 0); }
      50% { transform: scale(1.02); box-shadow: 0 10px 28px rgba(240, 128, 128, 0.18); }
    }
    #page2 .dots { text-align: center; margin-top: 6px; }
    #page2 .dot-active, #page2 .dot-inactive {
      height: 12px; width: 12px; margin: 0 2px; background: #ffaad4; border-radius: 50%; display: inline-block; opacity: 0.7;
    }
    #page2 .dot-inactive { background: #eed1ea; }

    @media (max-width: 768px) {
      #page2 .main-card { min-width: 90vw; }
      #page2 .countdown-container { gap: 12px; }
      #page2 .time-box { padding: 14px 8px; font-size: 1.2rem; }
    }

    /* ---------- PAGE 3 (Cake intro overlay CSS from your snippet) ---------- */
    #cake-intro{
      position:fixed; inset:0;
      background:radial-gradient(circle at 50% 30%, #fffaf3 0%, #fecdd3 45%, #d1fefc 110%);
      z-index:2147483647; display:grid; place-items:center; overflow:hidden;
    }
    #cake-intro.ci-fade-out{animation:ciFade 700ms ease forwards;}
    @keyframes ciFade{to{opacity:0; visibility:hidden;}}
    .ci-stage{position:relative;width:min(96vw,450px);height:min(96vh,380px);display:grid;place-items:center;}
    .ci-cake{filter:drop-shadow(0 20px 30px #deabf780);}
    .ci-flame{transform-origin:center;animation:ciFlicker .23s infinite alternate;}
    @keyframes ciFlicker{from{transform:scale(.93)translateY(-.7px);}to{transform:scale(1.10)translateY(.7px);}}
    .ci-knife{position:absolute;width:240px;height:26px;top:22px;left:-65px;transform:rotate(-24deg);pointer-events:none;z-index:2;}
    .ci-blade{position:absolute;left:0;top:2px;width:165px;height:9px;background:linear-gradient(90deg,#f1faf8,#e2e4e7 50%,#bbbbbb);border-radius:2px;box-shadow:0 0 8px #e2e4e7;}
    .ci-handle{position:absolute;left:165px;top:0;width:75px;height:13.5px;background:#5a3422;border-radius:4px;box-shadow:0 2px #fff8 0;}
    #cake-intro.ci-cut .ci-knife{animation:ciSlice 1.1s cubic-bezier(.3,.7,.2,1) 1 both;}
    @keyframes ciSlice{
      0%   { transform: translate(0,0) rotate(-24deg);}
      50%  { transform: translate(130px,85px) rotate(-19deg);}
      100% { transform: translate(240px,170px) rotate(-14deg);}
    }
    .ci-half{transition:transform .95s cubic-bezier(.3,.9,.2,1);}
    #cake-intro.ci-cut .ci-left{ transform: translateX(-25px) rotate(-2deg);}
    #cake-intro.ci-cut .ci-right{transform: translateX(25px) rotate(2deg);}
    #cake-intro.ci-cut .ci-spark{ animation:ciSpark .8s ease .15s 1 both;}
    @keyframes ciSpark{0%{opacity:0}14%{opacity:1}87%{opacity:1}100%{opacity:0}}
    .confetti{position:absolute;width:9px;height:16px;top:-26px;left:50%;opacity:0;transform:translateX(-50%);border-radius:2px;animation:confFall linear forwards;}
    #cake-intro.ci-cut .confetti{animation-duration:var(--d,2s); animation-delay:var(--dl,0s);}
    @keyframes confFall{0%{opacity:1;transform:translate3d(var(--x,0),-24px,0)rotate(0);}100%{opacity:1;transform:translate3d(var(--x,0),120vh,0)rotate(540deg);}}
    .cake-quote{
      position:absolute;top:70%;left:50%;transform:translateX(-50%);
      background:rgba(255,182,193,0.97);
      backdrop-filter:blur(12px);
      border:1px solid rgba(255,182,193,0.25);
      padding:14px 22px;
      border-radius:24px;
      font-family:'Inter',sans-serif;
      font-size:18px;
      font-weight:500;
      color:#d0196b;
      opacity:0;
      transition:all 0.85s cubic-bezier(0.25,0.46,0.45,0.94);
      z-index:5;
      text-align:center;
      letter-spacing:1px;
      box-shadow:0 6px 20px 0 rgba(255,182,193,0.13);
    }
    #cake-intro.ci-quote .cake-quote{ opacity:1; transform:translateX(-50%) translateY(-7px); }
    .ci-cut-btn{
      position:absolute;top:61%;left:50%;transform:translateX(-50%);
      background:#f08080;color:#fff;font:600 17px/1.1 ui-sans-serif,system-ui;
      border:none;border-radius:999px;padding:12px 28px;box-shadow:0 2px #f0808050;cursor:pointer;z-index:6;
      transition:background .18s;
    }
    .ci-cut-btn:hover {background:#ee649c;}
    .ci-skip{
      position:absolute;bottom:21px;right:23px;
      background:rgba(0,0,0,.56);color:#fff;border:none;border-radius:999px;
      padding:8.5px 15px; font:600 15px/1.1 ui-sans-serif,system-ui;cursor:pointer;
      box-shadow:0 2px #0002;
    }
    .candle-name-letter{
      font-family: 'Dancing Script','Caveat',cursive;
      font-size:27px;
      font-weight:700;
      fill:#d0196b;
      text-anchor:middle;
      dominant-baseline:middle;
      filter:drop-shadow(0 4px 12px #fff6de);
      paint-order:stroke fill;
      stroke:#ffe4e6;
      stroke-width:1;
    }
  </style>
</head>
<body>

  <!-- Autoplaying audio with user-gesture fallback -->
  <audio id="birthday-audio" src="https://raw.githubusercontent.com/USERNAME/REPO/main/music/barbaad.mp3" autoplay loop style="display:none"></audio>

  <!-- PAGE 1 -->
  <section id="page1" class="screen active fade-in" aria-label="Loading something special">
    <!-- Floating shapes -->
    <span class="floating heart1" style="left:10%; animation-delay: 0s;">♥</span>
    <span class="floating star" style="left:60%; animation-delay: 3s;">★</span>
    <span class="floating heart2" style="left:27%; animation-delay: 2s;">♥</span>
    <span class="floating star" style="left:80%; animation-delay: 1s;">★</span>
    <span class="floating heart1" style="left:50%; animation-delay: 5s;">♥</span>
    <span class="floating heart2" style="left:80%; animation-delay: 6s;">♥</span>

    <div class="center-card">
      <div class="hearts">💗 💗 💜</div>
      <div class="loading-text">Loading something<br>special...</div>
      <div class="decor" id="emojiRow" aria-label="Click the five emojis to continue">
        <span class="emoji" data-em="cake"   title="Click me">🎂</span>
        <span class="emoji" data-em="spark"  title="Click me">✨</span>
        <span class="emoji" data-em="gift"   title="Click me">🎁</span>
        <span class="emoji" data-em="heart"  title="Click me">💖</span>
        <span class="emoji" data-em="balloon" title="Click me">🎈</span>
      </div>
    </div>
  </section>

  <!-- PAGE 2 -->
  <section id="page2" class="screen" aria-label="Your Special Day is Almost Here">
    <!-- Decorative floating shapes -->
    <span class="p2-heart" style="left:7%; top:20%;">♥</span>
    <span class="p2-dot"   style="left:12%; top:80%;">●</span>
    <span class="p2-star"  style="left:72%; top:14%;">★</span>
    <span class="p2-dot"   style="left:47%; top:92%;">●</span>
    <span class="p2-heart" style="left:65%; top:65%;">♥</span>
    <span class="p2-dot"   style="left:82%; top:36%;">●</span>
    <span class="p2-star"  style="left:17%; top:55%;">★</span>

    <div class="main-card">
      <div class="title">
        Your Special Day is Almost Here <span style="font-size:1.5rem; vertical-align: middle;">💕</span>
      </div>
      <div class="countdown-container">
        <div class="time-box">
          <span id="days">0</span>
          <span class="time-label">Days</span>
          <span class="time-emoji">💗</span>
        </div>
        <div class="time-box">
          <span id="hours">0</span>
          <span class="time-label">Hours</span>
          <span class="time-emoji">🎁</span>
        </div>
        <div class="time-box">
          <span id="minutes">0</span>
          <span class="time-label">Minutes</span>
          <span class="time-emoji">🎂</span>
        </div>
        <div class="time-box">
          <span id="seconds">5</span>
          <span class="time-label">Seconds</span>
          <span class="time-emoji">⭐</span>
        </div>
      </div>
      <div class="message-box" id="p2-message">
        Just a little more... A small gift for my favorite person❤️
        <div class="dots">
          <span class="dot-active"></span>
          <span class="dot-inactive"></span>
          <span class="dot-inactive"></span>
        </div>
      </div>
    </div>
  </section>

  <!-- PAGE 3 -->
  <section id="page3" class="screen" aria-label="Happy Birthday page">
    <!-- Cake intro overlay -->
    <div id="cake-intro" aria-hidden="true">
      <div class="ci-stage" role="img" aria-label="Beautiful birthday cake with candles spelling Supriya">
        <svg class="ci-cake" viewBox="0 0 380 280" width="400" height="300" aria-hidden="true">
          <ellipse cx="190" cy="250" rx="140" ry="20" fill="#e5e7eb"/>
          <g class="ci-half ci-left">
            <ellipse cx="120" cy="200" rx="70" ry="30" fill="#d2691e"/>
            <ellipse cx="120" cy="185" rx="70" ry="8" fill="#f4a460"/>
            <ellipse cx="120" cy="175" rx="65" ry="5" fill="#ff69b4"/>
          </g>
          <g class="ci-half ci-right">
            <ellipse cx="260" cy="200" rx="70" ry="30" fill="#d2691e"/>
            <ellipse cx="260" cy="185" rx="70" ry="8" fill="#f4a460"/>
            <ellipse cx="260" cy="175" rx="65" ry="5" fill="#ff69b4"/>
          </g>
          <g class="ci-half ci-left">
            <ellipse cx="120" cy="150" rx="55" ry="25" fill="#dda0dd"/>
            <ellipse cx="120" cy="138" rx="55" ry="6" fill="#ffd1dc"/>
            <ellipse cx="120" cy="132" rx="50" ry="4" fill="#ff1493"/>
          </g>
          <g class="ci-half ci-right">
            <ellipse cx="260" cy="150" rx="55" ry="25" fill="#dda0dd"/>
            <ellipse cx="260" cy="138" rx="55" ry="6" fill="#ffd1dc"/>
            <ellipse cx="260" cy="132" rx="50" ry="4" fill="#ff1493"/>
          </g>
          <ellipse cx="190" cy="110" rx="85" ry="30" fill="#ffb6c1"/>
          <ellipse cx="190" cy="95" rx="85" ry="8" fill="#ffe4e6"/>
          <ellipse cx="190" cy="88" rx="80" ry="5" fill="#ff69b4"/>
          <g>
            <rect x="90" y="56" width="8" height="38" rx="2" fill="#87ceeb"/>
            <ellipse class="ci-flame" cx="94" cy="53" rx="3.5" ry="7" fill="#ffd700"/>
            <text class="candle-name-letter" x="94" y="54">S</text>
            <rect x="120" y="52" width="8" height="42" rx="2" fill="#98fb98"/>
            <ellipse class="ci-flame" cx="124" cy="48" rx="3.5" ry="7" fill="#ffd700"/>
            <text class="candle-name-letter" x="124" y="49">U</text>
            <rect x="150" y="48" width="8" height="46" rx="2" fill="#ffa07a"/>
            <ellipse class="ci-flame" cx="154" cy="44" rx="3.5" ry="7" fill="#ffd700"/>
            <text class="candle-name-letter" x="154" y="45">P</text>
            <rect x="180" y="44" width="8" height="50" rx="2" fill="#dda0dd"/>
            <ellipse class="ci-flame" cx="184" cy="40" rx="3.5" ry="7" fill="#ffd700"/>
            <text class="candle-name-letter" x="184" y="41">R</text>
            <rect x="210" y="48" width="8" height="46" rx="2" fill="#f0e68c"/>
            <ellipse class="ci-flame" cx="214" cy="44" rx="3.5" ry="7" fill="#ffd700"/>
            <text class="candle-name-letter" x="214" y="45">I</text>
            <rect x="240" y="52" width="8" height="42" rx="2" fill="#00BFFD"/>
            <ellipse class="ci-flame" cx="244" cy="48" rx="3.5" ry="7" fill="#ffd700"/>
            <text class="candle-name-letter" x="244" y="49">Y</text>
            <rect x="270" y="56" width="8" height="38" rx="2" fill="#ff69b4"/>
            <ellipse class="ci-flame" cx="274" cy="53" rx="3.5" ry="7" fill="#ffd700"/>
            <text class="candle-name-letter" x="274" y="54">A</text>
          </g>
          <g fill="#ff1493">
            <circle cx="110" cy="195" r="4"/>
            <circle cx="270" cy="195" r="4"/>
            <circle cx="95" cy="145" r="3"/>
            <circle cx="285" cy="145" r="3"/>
          </g>
          <line class="ci-spark" x1="100" y1="70" x2="280" y2="220" stroke="#ffe271" stroke-width="2.5" stroke-linecap="round" opacity="0"/>
          <g fill="#fffacd">
            <circle cx="150" cy="120" r="2"/>
            <circle cx="230" cy="120" r="2"/>
            <circle cx="170" cy="160" r="1.5"/>
            <circle cx="210" cy="160" r="1.5"/>
          </g>
        </svg>
        <div class="ci-knife" aria-hidden="true">
          <span class="ci-blade"></span>
          <span class="ci-handle"></span>
        </div>
        <button class="ci-cut-btn" id="ci-cut-btn">Cut Cake 🍰</button>
        <div class="cake-quote">Wishing you joy &amp; love!</div>
      </div>
      <button id="ci-skip" class="ci-skip" type="button">Skip</button>
    </div>

    <!-- Your original birthday page content -->
    <div id="wrapper">
      <div class="flag__birthday">
        <img src="./images/1.png" alt="" width="350" class="flag__left">
        <img src="./images/1.png" alt="" width="350" class="flag__right">
      </div>
      <div class="content">
        <div class="left">
          <div class="title">
            <h1 class="happy">
              <span style="--t: 4s;">H</span>
              <span style="--t: 4.2s;">a</span>
              <span style="--t: 4.4s;">p</span>
              <span style="--t: 4.6s;">p</span>
              <span style="--t: 4.8s;">y</span>
            </h1>
            <h1 class="birthday">
              <span style="--t: 5s;">B</span>
              <span style="--t: 5.2s;">i</span>
              <span style="--t: 5.4s;">r</span>
              <span style="--t: 5.6s;">t</span>
              <span style="--t: 5.8s;">h</span>
              <span style="--t: 6s;">d</span>
              <span style="--t: 6.2s;">a</span>
              <span style="--t: 6.4s;">y</span>
            </h1>
            <div class="hat">
              <img src="./images/hat.png" alt="" width="130">
            </div>
          </div>
          <div class="date__of__birth">
            <span></span>
          </div>
          <div class="btn">
            <button id="btn__letter">
              Click here Supriya ❤️
              <i class="fa-regular fa-envelope"></i>
            </button>
          </div>
        </div>
        <div class="right">
          <div class="box__account">
            <div class="image">
              <img src="./images/r5.png" alt="">
            </div>
            <div class="name">
              <i class="fa-solid fa-heart"></i>
              <span>❤️Supriya❤️</span>
              <i class="fa-solid fa-heart"></i>
            </div>
            <div class="balloon_one">
              <img width="100px" src="./images/balloon1.png" alt="">
            </div>
            <div class="balloon_two">
              <img width="100px" src="./images/balloon2.png" alt="">
            </div>
          </div>
          <div class="cricle">
            <div class="text__cricle">
              <span style="--i: 1;">h</span>
              <span style="--i: 2;">a</span>
              <span style="--i: 3;">p</span>
              <span style="--i: 4;">p</span>
              <span style="--i: 5;">y</span>
              <span style="--i: 6;">-</span>
              <span style="--i: 7;">b</span>
              <span style="--i: 8;">i</span>
              <span style="--i: 9;">r</span>
              <span style="--i: 10;">t</span>
              <span style="--i: 11;">h</span>
              <span style="--i: 12;">d</span>
              <span style="--i: 13;">a</span>
              <span style="--i: 14;">y</span>
              <span style="--i: 15;">-</span>
            </div>
            <i class="fa-solid fa-heart"></i>
          </div>
        </div>
      </div>

      <div class="decorate_star star1" style="--t: 15s;"></div>
      <div class="decorate_star star2" style="--t: 15.2s;"></div>
      <div class="decorate_star star3" style="--t: 15.4s;"></div>
      <div class="decorate_star star4" style="--t: 15.6s;"></div>
      <div class="decorate_star star5" style="--t: 15.8s;"></div>

      <div class="decorate_flower--one" style="--t: 15s;">
        <img width="20" src="./images/decorate_flower.png" alt="">
      </div>
      <div class="decorate_flower--two" style="--t: 15.3s;">
        <img width="20" src="./images/decorate_flower.png" alt="">
      </div>
      <div class="decorate_flower--three" style="--t: 15.6s;">
        <img width="20" src="./images/decorate_flower.png" alt="">
      </div>

      <div class="decorate_bottom">
        <img src="./images/decorate.png" alt="" width="100">
      </div>
      <div class="smiley__icon">
        <img src="./images/smiley_icon.png" alt="" width="100">
      </div>

      <div class="box__letter">
        <div class="letter__border">
          <div class="letter">
            <div class="title__letter"></div>
            <div class="content__letter">
              <div class="left">
                <img id="heart__letter" src="https://media.giphy.com/media/YKUvclrGYmDKXwtphf/giphy.gif" alt="">
                <img class="heart heart_1" style="--t: 0.2s" width="20" src="./images/heart.png" alt="">
                <img class="heart heart_2" style="--t: 0.4s" width="20" src="./images/heart.png" alt="">
                <img class="heart heart_3" style="--t: 0.6s" width="20" src="./images/heart.png" alt="">
                <img class="heart heart_4" style="--t: 0.8s" width="20" src="./images/heart.png" alt="">
              </div>
              <div class="right">
                <div class="love__img">
                  <img src="https://media.giphy.com/media/m85llaN7ZkFIHtURiC/giphy.gif" alt="" width="220">
                </div>
                <div class="text__letter">
                  <p></p>
                </div>
                <img id="mewmew" width="80" src="./images/mewmew.gif" alt="">
              </div>
            </div>
          </div>
          <div class="close">
            <i class="fa-solid fa-xmark"></i>
          </div>
        </div>
      </div>
    </div>

    <div id="copy">
      <p class="text-center text-white text-sm">Instagram <a href="https://www.instagram.com/aoudumber.dev/reels/#">@darkshadeoflove</a></p>
    </div>
  </section>

  <!-- Global navigation & behaviors -->
  <script>
    // Audio autoplay with promise + fallback on first user click
    window.addEventListener('DOMContentLoaded', function() {
      var audio = document.getElementById('birthday-audio');
      var playPromise = audio && audio.play && audio.play();
      if (playPromise && typeof playPromise.then === 'function') {
        playPromise.catch(function() {
          document.body.addEventListener('click', function() {
            audio.play().catch(()=>{ /* ignore */ });
          }, { once: true });
        });
      }
    });

    // Simple screen navigation helpers
    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active', 'fade-in'));
      var el = document.getElementById(id);
      if (el) {
        el.classList.add('active', 'fade-in');
      }
    }

    // PAGE 1: Emoji click-to-disappear -> then go to Page 2
    (function initPage1(){
      const emojiRow = document.getElementById('emojiRow');
      if (!emojiRow) return;
      const emojis = Array.from(emojiRow.querySelectorAll('.emoji'));
      let gone = 0;
      emojis.forEach(em => {
        em.addEventListener('click', function() {
          if (em.classList.contains('gone')) return;
          em.classList.add('gone');
          gone++;
          if (gone === emojis.length) {
            setTimeout(()=> showScreen('page2'), 480);
            startCountdown(); // prepare Page 2 countdown when entering
          }
        });
      });
    })();

    // PAGE 2: 5-second countdown, then Surprise message; clicking message proceeds to Page 3
    let countdownStarted = false;
    function startCountdown() {
      if (countdownStarted) return;
      countdownStarted = true;

      let totalSeconds = 5;
      const daysEl = document.getElementById("days");
      const hoursEl = document.getElementById("hours");
      const minutesEl = document.getElementById("minutes");
      const secondsEl = document.getElementById("seconds");
      const msgBox = document.getElementById('p2-message');

      function updateCountdown() {
        let days    = Math.floor(totalSeconds / (24*3600));
        let hours   = Math.floor((totalSeconds % (24*3600)) / 3600);
        let minutes = Math.floor((totalSeconds % 3600) / 60);
        let seconds = totalSeconds % 60;
        daysEl.textContent = days;
        hoursEl.textContent = hours;
        minutesEl.textContent = minutes;
        secondsEl.textContent = seconds;
      }
      updateCountdown();

      let countdownInterval = setInterval(function(){
        totalSeconds--;
        if (totalSeconds < 0) {
          clearInterval(countdownInterval);
          msgBox.innerHTML = '🎉 Surprise! The wait is over! 🎁<div style="font-size:.9rem;opacity:.8;margin-top:6px;">Click to continue</div>';
          msgBox.classList.add('ready');
          msgBox.addEventListener('click', function go3() {
            msgBox.removeEventListener('click', go3);
            showScreen('page3');
          }, { once: true });
        } else {
          updateCountdown();
        }
      }, 1000);
    }
  </script>

  <!-- CAKE INTRO JS (from your snippet) -->
  <script>
  (function(){
    const intro = document.getElementById('cake-intro');
    if (!intro) return;
    const cutBtn = document.getElementById('ci-cut-btn');

    function burst(n=30){
      const colors=['#fe8dc6','#fbbf24','#a3e635','#60b5fa','#ab8bfa','#f782b6'];
      for(let i=0;i<n;i++){
        const s=document.createElement('span');
        s.className='confetti';
        s.style.background = colors[i % colors.length];
        s.style.setProperty('--x', (Math.random()*260-130)+'px');
        s.style.setProperty('--d', (1.3+Math.random()*0.8).toFixed(2)+'s');
        s.style.setProperty('--dl', (0.05+Math.random()*0.35).toFixed(2)+'s');
        intro.appendChild(s);
        setTimeout(()=>s.remove(), 2100);
      }
    }
    function playCut(){
      if (!cutBtn) return;
      cutBtn.style.display="none";
      intro.classList.add('ci-cut');
      burst(30);
      setTimeout(()=>{intro.classList.add('ci-quote');},950);
      setTimeout(hide, 2600);
    }
    function hide(){
      intro.classList.add('ci-fade-out');
      setTimeout(()=>intro.remove(), 800);
    }
    if (cutBtn) cutBtn.addEventListener('click', playCut);
    const skip = document.getElementById('ci-skip');
    if (skip) skip.addEventListener('click', hide);
  })();
  </script>

  <!-- PAGE 3 original JS (typed letter, jQuery interactions) -->
  <script>
    let datetxt = "2 Nov  1999";
    let datatxtletter = "Happy birthday to the most beautiful, special girl in my heart. May your birthday be as beautiful and special as you are. Wishing you all the happiness your heart can hold on your special day.💕";
    let titleLetter = "To you";
    let charArrDate = datetxt.split('');
    let charArrDateLetter = datatxtletter.split('');
    let charArrTitle = titleLetter.split('');
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");

    setTimeout(function(){
      timeDatetxt = setInterval(function(){
        if(currentIndex < charArrDate.length){
          date__of__birth.textContent += charArrDate[currentIndex];
          currentIndex++;
        }
        else{
          let i = document.createElement("i");
          i.className = "fa-solid fa-star"
          document.querySelector(".date__of__birth").prepend(i)
          document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
          clearInterval(timeDatetxt)
        }
      },100)
    },12000)

    var intervalContent;
    var intervalTitle;
    $("#btn__letter").on("click", function(){
      $(".box__letter").slideDown()
      setTimeout(function(){
        $(".letter__border").slideDown();
      },1000)
      setTimeout(function(){
        intervalTitle = setInterval(function(){
          if(currentIndexTitle < charArrTitle.length){
            document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
            let i = document.createElement("i");
            i.className = "fa-solid fa-heart"
            document.querySelector(".title__letter").appendChild(i)
            currentIndexTitle++;
          }
          else{
            clearInterval(intervalTitle)
          }
        },100)
      },2000)
      setTimeout(function(){
        document.querySelector("#heart__letter").classList.add("animationOp");
        document.querySelector(".love__img").classList.add("animationOp");
        document.querySelector("#mewmew").classList.add("animationOp");
      },2800)
      setTimeout(function(){
        document.querySelectorAll(".heart").forEach((item)=>{
          item.classList.add("animation")
        })
      },3500)
      setTimeout(function(){
        intervalContent = setInterval(function(){
          if(currentIndexLetter < charArrDateLetter.length){
            text__letter.textContent += charArrDateLetter[currentIndexLetter];
            currentIndexLetter++;
          }
          else{
            clearInterval(intervalContent)
          }
        },50)
      },6000)
    })
    $(".close").on("click", function(){
      clearInterval(intervalContent)
      document.querySelector(".title__letter").textContent = "";
      text__letter.textContent = "";
      currentIndexLetter = 0
      currentIndexTitle = 0
      document.querySelector("#heart__letter").classList.remove("animationOp");
      document.querySelector(".love__img").classList.remove("animationOp");
      document.querySelector("#mewmew").classList.remove("animationOp");
      document.querySelectorAll(".heart").forEach((item)=>{
          item.classList.remove("animation")
        })
      $(".box__letter").slideUp();
      $(".letter__border").slideUp();
    })
  </script>
</body>
</html>
