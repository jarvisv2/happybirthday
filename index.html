<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Video Source + Birthday</title>
<link rel="stylesheet" href="style.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
  /* Utility/layout */
  body { margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans","Apple Color Emoji","Segoe UI Emoji"; background:#0b0b12; color:#f5f7fb; }
  .container { max-width:1100px; margin:auto; padding:16px; }
  h1,h2 { margin:12px 0; }
  .controls { display:flex; gap:8px; flex-wrap:wrap; margin:10px 0 16px; }
  .controls button, .controls a, .btn button, .cake-controls button { background:#6c5ce7; color:#fff; border:none; padding:10px 12px; border-radius:8px; cursor:pointer; text-decoration:none; }
  .controls button:disabled { opacity:.5; cursor:not-allowed; }
  .thumbs { display:flex; gap:8px; flex-wrap:wrap; }
  .thumbs img { width:140px; height:auto; border-radius:6px; }
  pre#ffmpeg { background:#141627; color:#d7e0ff; padding:12px; border-radius:8px; overflow:auto; }

  /* YouTube background player */
  #yt-wrap { position:relative; margin:16px 0; }
  #yt-bg {
    position:relative; padding-bottom:56.25%; height:0; overflow:hidden; border-radius:10px; border:1px solid #2b2e4a;
  }
  #yt-bg iframe {
    position:absolute; top:0; left:0; width:100%; height:100%; border:0;
  }
  .yt-controls { display:flex; gap:8px; margin-top:8px; }

  /* Cake animation (simple CSS cake + cut) */
  .cake-zone { margin:24px 0; display:grid; gap:12px; }
  .cake-stage { position:relative; height:260px; background:#111428; border:1px solid #2b2e4a; border-radius:12px; overflow:hidden; }
  .cake { position:absolute; left:50%; bottom:36px; transform:translateX(-50%); width:240px; height:140px; }
  .cake .tier { position:absolute; left:50%; transform:translateX(-50%); width:100%; border-radius:12px; background:#ff99b9; box-shadow:0 6px 0 #ff4a83 inset; }
  .cake .tier.t1 { bottom:0; height:70px; }
  .cake .tier.t2 { bottom:58px; width:75%; height:55px; }
  .cake .tier.t3 { bottom:106px; width:50%; height:40px; }
  .sprinkles::after { content:""; position:absolute; inset:0; background:
    radial-gradient(circle at 12% 40%, #ffee8d 4px, transparent 5px),
    radial-gradient(circle at 36% 62%, #f1663e 4px, transparent 5px),
    radial-gradient(circle at 66% 22%, #9a152b 4px, transparent 5px),
    radial-gradient(circle at 86% 50%, #f5e671 4px, transparent 5px); opacity:.9;
  }
  .candle { position:absolute; left:50%; bottom:136px; transform:translateX(-50%); width:12px; height:40px; background:#3aa2cf; border-radius:3px 3px 0 0; }
  .candle::before { content:""; position:absolute; top:-14px; left:50%; transform:translateX(-50%) rotate(135deg); width:18px; height:18px; background:#f1af3f; border-radius:50% 50% 50% 0; animation:flame 1.6s infinite; }
  @keyframes flame { 50% { transform:translateX(-50%) scale(.8) rotate(135deg);} }

  /* Cut animation: a diagonal slice separates tiers with a clip-path sweep */
  .cake.cut .mask { animation:slice 900ms ease-out forwards; }
  .mask {
    position:absolute; inset:0; pointer-events:none;
    background:linear-gradient(135deg, transparent 49%, rgba(255,255,255,.25) 50%, transparent 51%);
    mix-blend-mode:screen; opacity:0;
  }
  @keyframes slice {
    0% { opacity:0; clip-path:polygon(0 0, 0 0, 0 100%, 0 100%); }
    20% { opacity:1; }
    100% { opacity:1; clip-path:polygon(0 0, 100% 0, 100% 100%, 0 100%); }
  }

  /* Split effect: tiers shift apart */
  .cake.cut .t1 { transform:translateX(-50%) translateY(8px) rotate(0.2deg); transition:transform 700ms ease; }
  .cake.cut .t2 { transform:translateX(-50%) translate(-8px,-2px) rotate(-0.8deg); transition:transform 700ms ease; }
  .cake.cut .t3 { transform:translateX(-50%) translate(10px,-6px) rotate(1.2deg); transition:transform 700ms ease; }
  .cake.cut .candle { opacity:0; transition:opacity 250ms ease; }

  /* Confetti */
  .confetti { position:absolute; inset:0; overflow:hidden; pointer-events:none; }
  .confetti i { position:absolute; top:-10px; width:8px; height:14px; background:var(--c,#ffcc00); transform:rotate(var(--r,0deg)); animation:fall 900ms linear forwards; }
  @keyframes fall {
    to { transform:translateY(320px) rotate(calc(var(--r,0deg) + 260deg)); opacity:0; }
  }

  .cake-controls { display:flex; gap:8px; }
</style>
</head>
<body>
  <!-- BLOCK 1: Your local video player section (unchanged) -->
  <div class="container">
    <h1>Video Player ‚Äî "video_20251026_235525_edit.mp4"</h1>
    <video id="video" controls crossorigin="anonymous" style="width:100%; max-height:60vh; background:#000;">
      <source src="video_20251026_235525_edit.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>

    <div class="controls">
      <button id="captureBtn">Capture current frame</button>
      <button id="captureIntervalBtn">Capture interval (every 2s)</button>
      <button id="stopIntervalBtn" disabled>Stop interval</button>
      <a id="downloadAudio" href="#" download="audio_extracted.mp3">Download audio (needs server-side extraction)</a>
    </div>

    <h2>Captured frames</h2>
    <div id="thumbs" class="thumbs"></div>

    <h2>Instructions & FFmpeg commands</h2>
    <pre id="ffmpeg">
# FFmpeg commands
ffmpeg -i video_20251026_235525_edit.mp4 -vn -acodec libmp3lame -ab 192k audio_extracted.mp3
ffmpeg -i video_20251026_235525_edit.mp4 -vf fps=1 frame_%04d.png
ffmpeg -ss 00:00:05 -i video_20251026_235525_edit.mp4 -frames:v 1 frame_at_5s.png
ffprobe -v quiet -print_format json -show_format -show_streams video_20251026_235525_edit.mp4
    </pre>
    <p class="note">Place your MP4 in this folder and open this HTML in a browser.</p>
  </div>

  <!-- Background YouTube player (autoplay muted) -->
  <div class="container" id="yt-wrap">
    <h2>Birthday Song</h2>
    <div id="yt-bg">
      <div id="player"></div>
    </div>
    <div class="yt-controls">
      <button id="ytPlay">Play</button>
      <button id="ytPause">Pause</button>
      <button id="ytToggleMute">Unmute</button>
    </div>
  </div>

  <!-- Cake with cut button -->
  <div class="container cake-zone">
    <h2>Birthday Cake</h2>
    <div class="cake-controls">
      <button id="cutCakeBtn"><i class="fa-solid fa-cake-candles"></i> Cut the cake</button>
      <button id="resetCakeBtn">Reset cake</button>
    </div>
    <div class="cake-stage">
      <div class="cake" id="cake">
        <div class="tier t1 sprinkles"></div>
        <div class="tier t2 sprinkles"></div>
        <div class="tier t3 sprinkles"></div>
        <div class="candle"></div>
        <div class="mask"></div>
      </div>
      <div class="confetti" id="confetti"></div>
    </div>
  </div>

  <!-- BLOCK 2: Your ‚ÄúHappy Birthday | darkshadeoflove‚Äù page placed AFTER the first code -->
  <!-- Kept intact; minor script at bottom will coexist. -->
  <div class="container" style="max-width:1200px;">
    <div id="wrapper">
        <div class="flag__birthday">
            <img src="./images/1.png" alt="" width="350" class="flag__left">
            <img src="./images/1.png" alt="" width="350" class="flag__right">
        </div>
        <div class="content">
            <div class="left">
                <div class="title">
                    <h1 class="happy">
                        <span style="--t: 4s;">H</span>
                        <span style="--t: 4.2s;">a</span>
                        <span style="--t: 4.4s;">p</span>
                        <span style="--t: 4.6s;">p</span>
                        <span style="--t: 4.8s;">y</span>
                    </h1>
                    <h1 class="birthday">
                        <span style="--t: 5s;">B</span>
                        <span style="--t: 5.2s;">i</span>
                        <span style="--t: 5.4s;">r</span>
                        <span style="--t: 5.6s;">t</span>
                        <span style="--t: 5.8s;">h</span>
                        <span style="--t: 6s;">d</span>
                        <span style="--t: 6.2s;">a</span>
                        <span style="--t: 6.4s;">y</span>
                    </h1>
                    <div class="hat">
                        <img src="./images/hat.png" alt="" width="130">
                    </div>
                </div>
                <div class="date__of__birth">
                    <span></span>
                </div>
                <div class="btn">
                    <button id="btn__letter">
                        Click here Supriya ‚ù§Ô∏è
                        <i class="fa-regular fa-envelope"></i>
                    </button>
                </div>
            </div>
            <div class="right">
                <div class="box__account">
                    <div class="image">
                        <img src="./images/r5.png" alt="">
                    </div>
                    <div class="name">
                        <i class="fa-solid fa-heart"></i>
                        <span>Supriya ‚ù§Ô∏è</span>
                        <i class="fa-solid fa-heart"></i>
                    </div>
                    <div class="balloon_one">
                        <img width="100px" src="./images/balloon1.png" alt="">
                    </div>
                    <div class="balloon_two">
                        <img width="100px" src="./images/balloon2.png" alt="">
                    </div>
                </div>
                <div class="cricle">
                    <div class="text__cricle">
                        <span style="--i: 1;">h</span>
                        <span style="--i: 2;">a</span>
                        <span style="--i: 3;">p</span>
                        <span style="--i: 4;">p</span>
                        <span style="--i: 5;">y</span>
                        <span style="--i: 6;">-</span>
                        <span style="--i: 7;">b</span>
                        <span style="--i: 8;">i</span>
                        <span style="--i: 9;">r</span>
                        <span style="--i: 10;">t</span>
                        <span style="--i: 11;">h</span>
                        <span style="--i: 12;">d</span>
                        <span style="--i: 13;">a</span>
                        <span style="--i: 14;">y</span>
                        <span style="--i: 15;">-</span>
                    </div>
                    <i class="fa-solid fa-heart"></i>
                </div>
            </div>
        </div>
        <div class="decorate_star star1" style="--t: 15s;"></div>
        <div class="decorate_star star2" style="--t: 15.2s;"></div>
        <div class="decorate_star star3" style="--t: 15.4s;"></div>
        <div class="decorate_star star4" style="--t: 15.6s;"></div>
        <div class="decorate_star star5" style="--t: 15.8s;"></div>
        <div class="decorate_flower--one" style="--t: 15s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--two" style="--t: 15.3s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_flower--three" style="--t: 15.6s;">
            <img width="20" src="./images/decorate_flower.png" alt="">
        </div>
        <div class="decorate_bottom">
            <img src="./images/decorate.png" alt="" width="100">
        </div>
        <div class="smiley__icon">
            <img src="./images/smiley_icon.png" alt="" width="100">
        </div>

        <div class="box__letter">
            <div class="letter__border">
                <div class="letter">
                    <div class="title__letter"></div>
                    <div class="content__letter">
                        <div class="left">
                            <img id="heart__letter" src="https://media.giphy.com/media/YKUvclrGYmDKXwtphf/giphy.gif" alt="">
                            <img class="heart heart_1" style="--t: 0.2s" width="20" src="./images/heart.png" alt="">
                            <img class="heart heart_2" style="--t: 0.4s" width="20" src="./images/heart.png" alt="">
                            <img class="heart heart_3" style="--t: 0.6s" width="20" src="./images/heart.png" alt="">
                            <img class="heart heart_4" style="--t: 0.8s" width="20" src="./images/heart.png" alt="">
                        </div>
                        <div class="right">
                            <div class="love__img">
                                <img src="https://media.giphy.com/media/m85llaN7ZkFIHtURiC/giphy.gif" alt="" width="220">
                            </div>
                            <div class="text__letter">
                                 <p></p>
                            </div>
                            <img id="mewmew" width="80" src="./images/mewmew.gif" alt="">
                        </div>
                    </div>
                </div>
                <div class="close">
                    <i class="fa-solid fa-xmark"></i>
                </div>
            </div>
        </div>
    </div>

    <div id="copy">
      <p class="text-center text-white text-sm">darkshadeoflove<a href="https://www.instagram.com/@darkshadeoflove"></a></p>
    </div>
  </div>

  <!-- Scripts -->
  <script src="player.js"></script>

  <!-- YouTube IFrame API -->
  <script>
    // Load IFrame API
    const tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    document.head.appendChild(tag);

    let ytPlayer;
    function onYouTubeIframeAPIReady() {
      ytPlayer = new YT.Player('player', {
        videoId: 'kcGojPJzh1k', // target YouTube ID
        playerVars: {
          autoplay: 1, // attempt autoplay
          controls: 1,
          rel: 0,
          modestbranding: 1,
          playsinline: 1,
          mute: 1, // start muted to satisfy autoplay policy
          enablejsapi: 1
        },
        events: {
          onReady: e => {
            e.target.playVideo(); // play muted
          }
        }
      });
    }

    // Simple controls
    document.getElementById('ytPlay').addEventListener('click', () => ytPlayer && ytPlayer.playVideo());
    document.getElementById('ytPause').addEventListener('click', () => ytPlayer && ytPlayer.pauseVideo());
    document.getElementById('ytToggleMute').addEventListener('click', (ev) => {
      if (!ytPlayer) return;
      if (ytPlayer.isMuted()) {
        ytPlayer.unMute();
        ev.target.textContent = 'Mute';
      } else {
        ytPlayer.mute();
        ev.target.textContent = 'Unmute';
      }
    });

    // Many browsers only allow audible playback after a user gesture.
    // First click anywhere: unmute and continue.
    window.addEventListener('click', () => {
      if (ytPlayer && ytPlayer.isMuted && ytPlayer.isMuted()) {
        ytPlayer.unMute();
      }
    }, { once: true });
  </script>

  <!-- Cake cutting logic -->
  <script>
    const cake = document.getElementById('cake');
    const confettiBox = document.getElementById('confetti');
    const cutBtn = document.getElementById('cutCakeBtn');
    const resetBtn = document.getElementById('resetCakeBtn');

    function burstConfetti(count=60) {
      confettiBox.innerHTML = '';
      const colors = ['#ffcc00','#ff6699','#66ddff','#99ff66','#ff8844','#c299ff'];
      for (let i=0;i<count;i++){
        const chip = document.createElement('i');
        chip.style.left = Math.random()*100 + '%';
        chip.style.setProperty('--r', Math.round(Math.random()*180-90)+'deg');
        chip.style.setProperty('--c', colors[Math.floor(Math.random()*colors.length)]);
        confettiBox.appendChild(chip);
      }
    }

    cutBtn.addEventListener('click', ()=>{
      if (!cake.classList.contains('cut')) {
        cake.classList.add('cut');
        burstConfetti(80);
      }
    });

    resetBtn.addEventListener('click', ()=>{
      cake.classList.remove('cut');
      confettiBox.innerHTML = '';
    });
  </script>

  <!-- Original birthday letter typing script (unchanged) -->
  <script>
    let datetxt = "2 Nov 1999";
    let datatxtletter = "Happy birthday to the most beautiful, special girl in my heart. May your birthday be as beautiful and special as you are. Wishing you all the happiness your heart can hold on your special day.üíï"
    let titleLetter = "To you";
    let charArrDate = datetxt.split('');
    let charArrDateLetter = datatxtletter.split('');
    let charArrTitle = titleLetter.split('');
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");
    setTimeout(function(){
        timeDatetxt = setInterval(function(){
            if(currentIndex < charArrDate.length){
                date__of__birth.textContent += charArrDate[currentIndex];
                currentIndex++;
            }
            else{
                let i = document.createElement("i");
                i.className = "fa-solid fa-star"
                document.querySelector(".date__of__birth").prepend(i)
                document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
                clearInterval(timeDatetxt)
            }
        },100)
    },12000)

    var intervalContent;
    var intervalTitle;
    document.getElementById("btn__letter").addEventListener("click", function(){
        document.querySelector(".box__letter").style.display = "block";
        setTimeout(function(){
            document.querySelector(".letter__border").style.display = "block";
        },1000)
        setTimeout(function(){
            intervalTitle = setInterval(function(){
                if(currentIndexTitle < charArrTitle.length){
                    document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
                    let i = document.createElement("i");
                    i.className = "fa-solid fa-heart"
                    document.querySelector(".title__letter").appendChild(i)
                    currentIndexTitle++;
                }
                else{
                    clearInterval(intervalTitle)
                }
            },100)
        },2000)
        setTimeout(function(){
            document.querySelector("#heart__letter").classList.add("animationOp");
            document.querySelector(".love__img").classList.add("animationOp");
            document.querySelector("#mewmew").classList.add("animationOp");
        },2800)
        setTimeout(function(){
            document.querySelectorAll(".heart").forEach((item)=>{
                item.classList.add("animation")
            })
        },3500)
        setTimeout(function(){
            intervalContent = setInterval(function(){
                if(currentIndexLetter < charArrDateLetter.length){
                    text__letter.textContent += charArrDateLetter[currentIndexLetter];
                    currentIndexLetter++;
                }
                else{
                    clearInterval(intervalContent)
                }
            },50)
        },6000)
    });

    document.querySelector(".close").addEventListener("click", function(){
        clearInterval(intervalContent)
        document.querySelector(".title__letter").textContent = "";
        text__letter.textContent = "";
        currentIndexLetter = 0
        currentIndexTitle = 0
        document.querySelector("#heart__letter").classList.remove("animationOp");
        document.querySelector(".love__img").classList.remove("animationOp");
        document.querySelector("#mewmew").classList.remove("animationOp");
        document.querySelectorAll(".heart").forEach((item)=>{
                item.classList.remove("animation")
            })
        document.querySelector(".box__letter").style.display = "none";
        document.querySelector(".letter__border").style.display = "none";
    });
  </script>
</body>
</html>
