<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="title" content="Happy Birthday Website 2.0 | Aoudumber Bade"/>
  <meta name="github" content="https://github.com/Aoudumber-Bade"/>
  <title>HBD 2.0 | Aoudumber Bade</title>
  <link rel="stylesheet" href="style.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
  <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

  <!-- Extra styles for countdown + cake overlay -->
  <style>
    /* Overlay */
    #introOverlay {
      position: fixed; inset: 0;
      background: radial-gradient(1200px 700px at 50% 20%, #2c2f48 0%, #151728 60%, #0b0d18 100%);
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      z-index: 9999; color: #fff; text-align: center; padding: 24px;
    }
    .hidden { display: none !important; }

    /* Countdown */
    .countdown-stage { display: flex; flex-direction: column; align-items: center; gap: 16px; }
    .countdown-circle {
      width: 160px; height: 160px; border-radius: 50%;
      border: 6px solid rgba(255,255,255,.6);
      display: flex; align-items: center; justify-content: center;
      font: 700 56px/1.1 "Poppins", system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color: #fff;
      box-shadow: 0 0 30px rgba(255,255,255,.08) inset, 0 10px 30px rgba(0,0,0,.3);
    }
    .countdown-sub { opacity: .9; font-size: 15px; letter-spacing: .4px; }

    /* Cake stage */
    .cake-stage { display: flex; flex-direction: column; align-items: center; gap: 18px; }
    .cake {
      position: relative; width: 260px; height: 200px;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,.4));
    }
    .plate {
      position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);
      width: 240px; height: 16px; background: #e7e7ef; border-radius: 16px;
      box-shadow: 0 3px 0 #cfcfe4 inset;
    }
    .layer { position: absolute; left: 20px; width: 220px; border-radius: 16px; }
    .layer.bottom { height: 70px; bottom: 16px; background: linear-gradient(#ff9aa2, #ff7b91); box-shadow: 0 8px 0 #e26074 inset; }
    .layer.middle { height: 60px; bottom: 80px; background: linear-gradient(#ffd1dc, #ffb6c1); box-shadow: 0 8px 0 #e7a0ab inset; }
    .layer.top    { height: 50px; bottom: 135px; background: linear-gradient(#fff5a5, #ffd36e); box-shadow: 0 8px 0 #e6b65a inset; transition: transform .4s ease; }

    .candle {
      position: absolute; width: 12px; height: 50px; left: calc(50% - 6px); bottom: 185px;
      background: #fff; box-shadow: inset 0 0 0 2px #e33;
    }
    .flame {
      position: absolute; width: 10px; height: 16px; top: -16px; left: 1px;
      background: radial-gradient(ellipse at center, #ff0 0%, #ffa500 60%, transparent 61%);
      border-radius: 50%;
      animation: flicker .12s infinite alternate;
      filter: drop-shadow(0 0 6px #ff0);
      transform-origin: center;
      transition: opacity .2s ease;
    }
    @keyframes flicker { from { transform: translateY(0) scale(1); } to { transform: translateY(-1px) scale(.98); } }

    .knife {
      position: absolute; width: 180px; height: 6px; top: 80px; left: -220px;
      background: linear-gradient(90deg,#bbb,#eee); border-radius: 3px;
      transform: rotate(8deg); box-shadow: 0 0 0 2px #999 inset;
    }
    .cake.cut .knife { animation: slice 1s ease-out forwards; }
    @keyframes slice { to { left: 280px; top: 100px; transform: rotate(12deg); } }

    .cake.opened .layer.top { transform: rotate(-8deg) translate(-18px,-6px); }
    .cake.opened .flame { opacity: 0; }

    #cutCakeBtn {
      margin-top: 8px; padding: 12px 18px; border: none;
      background: #ff5c93; color: #fff; border-radius: 8px; cursor: pointer; font-weight: 600;
      box-shadow: 0 6px 16px rgba(255,92,147,.35);
    }
    #cutCakeBtn:active { transform: translateY(1px); }

    /* Confetti */
    #confetti { pointer-events: none; position: fixed; inset: 0; overflow: hidden; }
    .confetti { position: absolute; width: 8px; height: 12px; opacity: 0; will-change: transform, opacity; animation: confettiFall linear forwards; }
    @keyframes confettiFall {
      0% { opacity: 1; transform: translateY(-10vh) rotate(0deg); }
      100% { opacity: 0; transform: translateY(110vh) rotate(720deg); }
    }

    /* Background player kept effectively invisible but present */
    #player { position: absolute; width: 1px; height: 1px; opacity: 0; pointer-events: none; }
  </style>
</head>
<body>

  <!-- New: Countdown + Cake overlay -->
  <div id="introOverlay">
    <div class="countdown-stage">
      <div class="countdown-circle"><span id="countNum">5</span></div>
      <div class="countdown-sub">Starting the music in a momentâ€¦</div>
    </div>

    <div class="cake-stage hidden">
      <div class="cake">
        <div class="plate"></div>
        <div class="layer bottom"></div>
        <div class="layer middle"></div>
        <div class="layer top"></div>
        <div class="candle"><div class="flame"></div></div>
        <div class="knife"></div>
      </div>
      <button id="cutCakeBtn">Cut the cake</button>
      <div id="confetti"></div>
    </div>

    <!-- YouTube player (created/controlled via IFrame API) -->
    <div id="player"></div>
  </div>

  <!-- Your original content (unchanged) -->
  <div id="wrapper">
    <div class="flag__birthday">
      <img src="./images/1.png" alt="" width="350" class="flag__left">
      <img src="./images/1.png" alt="" width="350" class="flag__right">
    </div>
    <div class="content">
      <div class="left">
        <div class="title">
          <h1 class="happy">
            <span style="--t: 4s;">H</span>
            <span style="--t: 4.2s;">a</span>
            <span style="--t: 4.4s;">p</span>
            <span style="--t: 4.6s;">p</span>
            <span style="--t: 4.8s;">y</span>
          </h1>
          <h1 class="birthday">
            <span style="--t: 5s;">B</span>
            <span style="--t: 5.2s;">i</span>
            <span style="--t: 5.4s;">r</span>
            <span style="--t: 5.6s;">t</span>
            <span style="--t: 5.8s;">h</span>
            <span style="--t: 6s;">d</span>
            <span style="--t: 6.2s;">a</span>
            <span style="--t: 6.4s;">y</span>
          </h1>
          <div class="hat">
            <img src="./images/hat.png" alt="" width="130">
          </div>
        </div>
        <div class="date__of__birth">
          <span></span>
        </div>
        <div class="btn">
          <button id="btn__letter">
            Click here Rashmii
            <i class="fa-regular fa-envelope"></i>
          </button>
        </div>
      </div>
      <div class="right">
        <div class="box__account">
          <div class="image">
            <img src="./images/r5.png" alt="">
          </div>
          <div class="name">
            <i class="fa-solid fa-heart"></i>
            <span>Rashmiiii</span>
            <i class="fa-solid fa-heart"></i>
          </div>
          <div class="balloon_one">
            <img width="100px" src="./images/balloon1.png" alt="">
          </div>
          <div class="balloon_two">
            <img width="100px" src="./images/balloon2.png" alt="">
          </div>
        </div>
        <div class="cricle">
          <div class="text__cricle">
            <span style="--i: 1;">h</span>
            <span style="--i: 2;">a</span>
            <span style="--i: 3;">p</span>
            <span style="--i: 4;">p</span>
            <span style="--i: 5;">y</span>
            <span style="--i: 6;">-</span>
            <span style="--i: 7;">b</span>
            <span style="--i: 8;">i</span>
            <span style="--i: 9;">r</span>
            <span style="--i: 10;">t</span>
            <span style="--i: 11;">h</span>
            <span style="--i: 12;">d</span>
            <span style="--i: 13;">a</span>
            <span style="--i: 14;">y</span>
            <span style="--i: 15;">-</span>
          </div>
          <i class="fa-solid fa-heart"></i>
        </div>
      </div>
    </div>
    <div class="decorate_star star1" style="--t: 15s;"></div>
    <div class="decorate_star star2" style="--t: 15.2s;"></div>
    <div class="decorate_star star3" style="--t: 15.4s;"></div>
    <div class="decorate_star star4" style="--t: 15.6s;"></div>
    <div class="decorate_star star5" style="--t: 15.8s;"></div>
    <div class="decorate_flower--one" style="--t: 15s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_flower--two" style="--t: 15.3s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_flower--three" style="--t: 15.6s;">
      <img width="20" src="./images/decorate_flower.png" alt="">
    </div>
    <div class="decorate_bottom">
      <img src="./images/decorate.png" alt="" width="100">
    </div>
    <div class="smiley__icon">
      <img src="./images/smiley_icon.png" alt="" width="100">
    </div>

    <div class="box__letter">
      <div class="letter__border">
        <div class="letter">
          <div class="title__letter"></div>
          <div class="content__letter">
            <div class="left">
              <img id="heart__letter" src="https://media.giphy.com/media/YKUvclrGYmDKXwtphf/giphy.gif" alt="">
              <img class="heart heart_1" style="--t: 0.2s" width="20" src="./images/heart.png" alt="">
              <img class="heart heart_2" style="--t: 0.4s" width="20" src="./images/heart.png" alt="">
              <img class="heart heart_3" style="--t: 0.6s" width="20" src="./images/heart.png" alt="">
              <img class="heart heart_4" style="--t: 0.8s" width="20" src="./images/heart.png" alt="">
            </div>
            <div class="right">
              <div class="love__img">
                <img src="https://media.giphy.com/media/m85llaN7ZkFIHtURiC/giphy.gif" alt="" width="220">
              </div>
              <div class="text__letter">
                <p></p>
              </div>
              <img id="mewmew" width="80" src="./images/mewmew.gif" alt="">
            </div>
          </div>
        </div>
        <div class="close">
          <i class="fa-solid fa-xmark"></i>
        </div>
      </div>
    </div>
  </div>

  <div id="copy">
    <p class="text-center text-white text-sm">OG Creator <a href="https://www.instagram.com/aoudumber.dev/reels/#">@aoudumber.dev</a></p>
  </div>

  <!-- YouTube IFrame API load -->
  <script>
    // Load the IFrame API
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    let player, ytReady = false, shouldAutoplay = false;

    // API callback
    function onYouTubeIframeAPIReady() {
      player = new YT.Player('player', {
        videoId: 'kcGojPJzh1k', // Your song
        playerVars: {
          autoplay: 0, controls: 0, rel: 0, playsinline: 1, modestbranding: 1
        },
        events: { onReady: onPlayerReady }
      });
    }
    function onPlayerReady() {
      ytReady = true;
      if (shouldAutoplay) {
        try { player.mute(); player.playVideo(); } catch (e) {}
      }
    }

    // Intro logic
    $(function () {
      const $overlay = $('#introOverlay');
      const $countStage = $('.countdown-stage');
      const $cakeStage = $('.cake-stage');
      const $cake = $('.cake');
      const $num = $('#countNum');

      // 5 second countdown
      let s = 5; $num.text(s);
      const timer = setInterval(() => {
        s--; $num.text(s);
        if (s <= 0) {
          clearInterval(timer);
          // Show cake stage, start music muted
          $countStage.addClass('hidden');
          $cakeStage.removeClass('hidden');

          shouldAutoplay = true;
          if (ytReady && player && typeof player.playVideo === 'function') {
            try { player.mute(); player.playVideo(); } catch (e) {}
          }
        }
      }, 1000);

      // Cake cut
      $('#cutCakeBtn').on('click', function () {
        $cake.addClass('cut');
        setTimeout(() => { $cake.addClass('opened'); }, 950);

        // User gesture -> safe to unmute
        try { if (player && typeof player.unMute === 'function') { player.unMute(); } } catch (e) {}

        // Confetti
        launchConfetti();

        // Fade out intro
        setTimeout(() => { $overlay.fadeOut(700, () => $overlay.remove()); }, 2600);
      });
    });

    // Simple confetti
    function launchConfetti() {
      const colors = ['#f94144','#f3722c','#f9c74f','#90be6d','#43aa8b','#577590','#f9844a','#ff5c93'];
      const $c = $('#confetti');
      for (let i = 0; i < 80; i++) {
        const $p = $('<div class="confetti"></div>');
        const size = 6 + Math.random() * 8;
        const left = Math.random() * 100;
        const duration = 1.2 + Math.random() * 1.4;
        const delay = Math.random() * 0.3;
        $p.css({
          width: size + 'px',
          height: size * 1.4 + 'px',
          left: left + 'vw',
          background: colors[Math.floor(Math.random() * colors.length)],
          animationDuration: duration + 's',
          animationDelay: delay + 's'
        });
        $c.append($p);
        setTimeout(() => $p.remove(), (duration + delay) * 1000 + 200);
      }
    }
  </script>

  <!-- Your original script (unchanged) -->
  <script>
    let datetxt = "5 April 1996";
    let datatxtletter = "My love. You are a very special girl. I always silently thank you for coming into my life. Today, I wish you all the best, lots of health, and lots of joy. I always hope we will celebrate many more birthdays like this together. Happy birthday to you.ðŸ’•";
    let titleLetter = "To you";
    let charArrDate = datetxt.split('');
    let charArrDateLetter = datatxtletter.split('');
    let charArrTitle = titleLetter.split('');
    let currentIndex = 0;
    let currentIndexLetter = 0;
    let currentIndexTitle = 0;
    let date__of__birth = document.querySelector(".date__of__birth span");
    let text__letter = document.querySelector(".text__letter p");
    setTimeout(function(){
        timeDatetxt = setInterval(function(){
            if(currentIndex < charArrDate.length){
                date__of__birth.textContent += charArrDate[currentIndex];
                currentIndex++;
            }
            else{
                let i = document.createElement("i");
                i.className = "fa-solid fa-star"
                document.querySelector(".date__of__birth").prepend(i)
                document.querySelector(".date__of__birth").appendChild(i.cloneNode(true))
                clearInterval(timeDatetxt)
            }
        },100)
    },12000)

    var intervalContent;
    var intervalTitle;
    $("#btn__letter").on("click", function(){
        $(".box__letter").slideDown()
        setTimeout(function(){
            $(".letter__border").slideDown();
        },1000)
        setTimeout(function(){
            intervalTitle = setInterval(function(){
                if(currentIndexTitle < charArrTitle.length){
                    document.querySelector(".title__letter").textContent += charArrTitle[currentIndexTitle];
                    let i = document.createElement("i");
                    i.className = "fa-solid fa-heart"
                    document.querySelector(".title__letter").appendChild(i)
                    currentIndexTitle++;
                }
                else{
                    clearInterval(intervalTitle)
                }
            },100)
        },2000)
        setTimeout(function(){
            document.querySelector("#heart__letter").classList.add("animationOp");
            document.querySelector(".love__img").classList.add("animationOp");
            document.querySelector("#mewmew").classList.add("animationOp");
        },2800)
        setTimeout(function(){
            document.querySelectorAll(".heart").forEach((item)=>{
                item.classList.add("animation")
            })
        },3500)
        setTimeout(function(){
            intervalContent = setInterval(function(){
                if(currentIndexLetter < charArrDateLetter.length){
                    text__letter.textContent += charArrDateLetter[currentIndexLetter];
                    currentIndexLetter++;
                }
                else{
                    clearInterval(intervalContent)
                }
            },50)
        },6000)
    })
    $(".close").on("click", function(){
        clearInterval(intervalContent)
        document.querySelector(".title__letter").textContent = "";
        text__letter.textContent = "";
        currentIndexLetter = 0
        currentIndexTitle = 0
        document.querySelector("#heart__letter").classList.remove("animationOp");
        document.querySelector(".love__img").classList.remove("animationOp");
        document.querySelector("#mewmew").classList.remove("animationOp");
        document.querySelectorAll(".heart").forEach((item)=>{
                item.classList.remove("animation")
            })
        $(".box__letter").slideUp();
        $(".letter__border").slideUp();
    })
  </script>
</body>
</html>
